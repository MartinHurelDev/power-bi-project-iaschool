cls_list
class(cls_list)
as.character(cls_list)
cls_vect <- sapply(flags, class)
class(cls_vect)
?lapply
?sapply
?sapply
sum(flags$orange)
flag_colors <- flags[, 11:17]
head(flag_colors)
lapply(flag_colors,sum)
sapply(flag_colors,sum)
sapply(flag_colors,mean)
flag_shapes <- flags[, 19:23]
lapply(flag_colors,range)
lapply(flag_shapes, range)
sapply(flag_shapes, range)
shape_mat <- sapply(flag_shapes, range)
shape_mat
class(shape_mat)
unique(c(3, 4, 5, 5, 5, 6, 6))
lapply(flag,unique)
lapply(flags,unique)
unique_vals <- lapply(flags, unique)
unique_vals
lapply(unique_vals,length)
sapply(unique_vals,length)
sapply(flags,unique)
s
lapply(unique_vals, function(elem) elem[2])
install.packages("ggthemes")
shiny::runApp('IA Scool/projets/FAO/FAO')
runApp('IA Scool/projets/FAO/FAO')
runApp()
runApp('IA Scool/projets/FAO/FAO')
library(sqlQuery)
install.packages("sqlQuery")
library(dplyr)
library(readr)
library(odbc)
library(RMySQL)
importData <<- function(){
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
# importing dataFrames
if(!exists('vegetal')) vegetal <<- read_csv('data_fao/vegetal_product.csv')
if(!exists('animal')) animal <<- read_csv('data_fao/animal_product.csv')
if(!exists('undernourished')) undernourished <- read_csv('data_fao/undernourished.csv')
if(!exists('cereals')) cereals <<- read_csv('data_fao/cereals_product.csv')
if(!exists('population')) population <<- read_csv('data_fao/population.csv')
}
clean_data <- function(){
population <<- population %>% mutate(population_value = Value*strtoi(gsub("[^0-9.]","", Unit))/1000000000)
}
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = database, # fao
user=usr, #root
password=pwd,
Port = port) #3306
odbcQuery(con, 'CREATE TABLE IF NOT EXISTS fao')
return(con)
}
dataFrameToTable <- function(con,TableName,data,replace=FALSE){
if (!dbExistsTable(con, TableName) || (replace==TRUE) ){
dbWriteTable(con, name = TableName, value = data, row.names = FALSE)
}
}
insertDatabase <<- function(){
con <<- dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataFrameToTable(con,'animal',animal)
dataFrameToTable(con,'cereals',cereals)
dataFrameToTable(con,'population',population)
dataFrameToTable(con,'undernourished',population)
dataFrameToTable(con,'vegetal',vegetal)
}
start_prog <<- function(){
importData()
clean_data()
insertDatabase()
}
stop_connection <<- function(){
all_cons <- dbListConnections(MySQL())
for(con in all_cons)
dbDisconnect(con)
}
shiny::runApp('IA Scool/projets/FAO/FAO')
con <<- dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con_tmp <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
user=usr, #root
password=pwd,
Port = port) #3306
odbcQuery(con_tmp, 'CREATE TABLE IF NOT EXISTS fao')
# con <- dbConnect(MySQL(),
#                  Driver = driver,# MySQL
#                  host = server, #localhost
#                  dbname = database, # fao
#                  user=usr, #root
#                  password=pwd,
#                  Port = port) #3306
#
return(con)
}
dataBaseConnect("MySQL","localhost","fao","root","",3306)
library(dplyr)
library(readr)
library(odbc)
library(RMySQL)
library(RODBC)
dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con_tmp <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
user=usr, #root
password=pwd,
Port = port) #3306
#odbcQuery(con_tmp, 'CREATE TABLE IF NOT EXISTS fao')
# con <- dbConnect(MySQL(),
#                  Driver = driver,# MySQL
#                  host = server, #localhost
#                  dbname = database, # fao
#                  user=usr, #root
#                  password=pwd,
#                  Port = port) #3306
#
return(con)
}
dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con_tmp <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
user=usr, #root
password=pwd,
Port = port) #3306
odbcQuery(con_tmp, 'CREATE TABLE IF NOT EXISTS fao')
con <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = database, # fao
user=usr, #root
password=pwd,
Port = port) #3306
return(con)
}
dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con_tmp <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
user=usr, #root
password=pwd,
Port = port) #3306
sqlQuery(con_tmp, 'CREATE TABLE IF NOT EXISTS fao')
con <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = database, # fao
user=usr, #root
password=pwd,
Port = port) #3306
return(con)
}
dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con_tmp <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
user=usr, #root
password=pwd,
Port = port) #3306
RODBC::sqlQuery(con_tmp, 'CREATE TABLE IF NOT EXISTS fao')
con <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = database, # fao
user=usr, #root
password=pwd,
Port = port) #3306
return(con)
}
dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con_tmp <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
user=usr, #root
password=pwd,
Port = port) #3306
RODBC::dbGetQuery(con_tmp, 'CREATE TABLE IF NOT EXISTS fao')
con <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = database, # fao
user=usr, #root
password=pwd,
Port = port) #3306
return(con)
}
dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con_tmp <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
user=usr, #root
password=pwd,
Port = port) #3306
dbGetQuery(con_tmp, 'CREATE TABLE IF NOT EXISTS fao')
con <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = database, # fao
user=usr, #root
password=pwd,
Port = port) #3306
return(con)
}
dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con_tmp <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
user=usr, #root
password=pwd,
Port = port) #3306
dbGetQuery(con_tmp, 'SELECT mysql ; CREATE TABLE IF NOT EXISTS fao')
con <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = database, # fao
user=usr, #root
password=pwd,
Port = port) #3306
return(con)
}
dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con_tmp <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = 'mysql',
user=usr, #root
password=pwd,
Port = port) #3306
dbGetQuery(con_tmp, 'CREATE TABLE IF NOT EXISTS fao')
con <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = database, # fao
user=usr, #root
password=pwd,
Port = port) #3306
return(con)
}
dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con_tmp <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = 'mysql',
user=usr, #root
password=pwd,
Port = port) #3306
dbGetQuery(con_tmp, 'CREATE DATABASE IF NOT EXISTS fao')
con <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = database, # fao
user=usr, #root
password=pwd,
Port = port) #3306
return(con)
}
dataBaseConnect("MySQL","localhost","fao","root","",3306)
runApp('IA Scool/projets/FAO/FAO')
runApp('IA Scool/projets/FAO/FAO')
runApp('IA Scool/projets/FAO/FAO')
runApp('IA Scool/projets/FAO/FAO')
runApp('IA Scool/projets/FAO/FAO')
test2 <- population %>% select(Area) %>% distinct()
test <- population %>% subset(`Area Code` != 351 )
View(test)
View(test2)
test <- population %>% subset(`Area Code` = 351 )
View(test)
test <- population %>% subset(`Area Code` == 351 )
View(test)
View(animal)
View(animal)
View(vegetal)
View(vegetal)
animal %>% dim()
vegetal %>% dim()
test <- rbind(animal,vegetal)
test %>% dim()
171135 + 599681
test <- rbind(animal %>% mutate(origin = 'animal'),vegetal %>% mutate(origin = 'vegetal'))
View(test)
library(dplyr)
library(readr)
library(odbc)
library(RMySQL)
library(RODBC)
importData <<- function(){
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
# importing dataFrames
if(!exists('vegetal')) vegetal <<- read_csv('data_fao/vegetal_product.csv')
if(!exists('animal')) animal <<- read_csv('data_fao/animal_product.csv')
if(!exists('undernourished')) undernourished <- read_csv('data_fao/undernourished.csv')
if(!exists('cereals')) cereals <<- read_csv('data_fao/cereals_product.csv')
if(!exists('population')) population <<- read_csv('data_fao/population.csv')
}
clean_data <- function(){
population <<- population %>% mutate(population_value = Value*strtoi(gsub("[^0-9.]","", Unit))/1000000000)
dispo_alim <<- rbind(animal %>% mutate(origin = 'animal'),vegetal %>% mutate(origin = 'vegetal'))
}
dataBaseConnect <<- function(driver,server,database,usr,pwd,port){
con_tmp <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = 'mysql',
user=usr, #root
password=pwd,
Port = port) #3306
dbGetQuery(con_tmp, 'CREATE DATABASE IF NOT EXISTS fao')
con <- dbConnect(MySQL(),
Driver = driver,# MySQL
host = server, #localhost
dbname = database, # fao
user=usr, #root
password=pwd,
Port = port) #3306
return(con)
}
dataFrameToTable <- function(con,TableName,data,replace=FALSE){
if (!dbExistsTable(con, TableName) || (replace==TRUE) ){
dbWriteTable(con, name = TableName, value = data, row.names = FALSE)
}
}
insertDatabase <<- function(){
con <<- dataBaseConnect("MySQL","localhost","fao","root","",3306)
dataFrameToTable(con,'animal',animal)
dataFrameToTable(con,'cereals',cereals)
dataFrameToTable(con,'population',population)
dataFrameToTable(con,'undernourished',population)
dataFrameToTable(con,'vegetal',vegetal)
}
start_prog <<- function(){
importData()
clean_data()
insertDatabase()
}
stop_connection <<- function(){
all_cons <- dbListConnections(MySQL())
for(con in all_cons)
dbDisconnect(con)
}
shiny::runApp('IA Scool/projets/FAO/FAO')
test %>% select(Element) %>% distinct()
animal %>% dim()
vegetal %>% dim()
test <- rbind(animal %>% mutate(origin = 'animal'),vegetal %>% mutate(origin = 'vegetal'))
test2 <- test %>% select(Item code)
test %>% dim()
#dispo_alim <-
View(test2)
View(test2)
animal %>% dim()
vegetal %>% dim()
test <- rbind(animal %>% mutate(origin = 'animal'),vegetal %>% mutate(origin = 'vegetal'))
test2 <- test %>% select(`Item Code`)
test %>% dim()
#dispo_alim <-
View(test)
View(test)
View(test2)
View(test2)
View(test2)
View(test2)
animal %>% dim()
vegetal %>% dim()
test <- rbind(animal %>% mutate(origin = 'animal'),vegetal %>% mutate(origin = 'vegetal'))
test2 <- test %>% select(`Item Code`,Item,`Area Code`,Area,Value,Year,origin)
test %>% dim()
#dispo_alim <-
View(test2)
animal %>% dim()
vegetal %>% dim()
test <- rbind(animal %>% mutate(origin = 'animal'),vegetal %>% mutate(origin = 'vegetal'))
test2 <- test %>% select(`Item Code`,Item,`Area Code`,Area,Value,Year,Element,origin)
test %>% dim()
#dispo_alim <-
View(vegetal)
View(test2)
animal %>% dim()
vegetal %>% dim()
test <- rbind(animal %>% mutate(origin = 'animal'),vegetal %>% mutate(origin = 'vegetal'))
test2 <- test %>% select(`Item Code`,Item,`Area Code`,Area,Value,Year,Element,origin) %>% filter(Element == 'feed')
test %>% dim()
#dispo_alim <-
animal %>% dim()
vegetal %>% dim()
test <- rbind(animal %>% mutate(origin = 'animal'),vegetal %>% mutate(origin = 'vegetal'))
test2 <- test %>% select(`Item Code`,Item,`Area Code`,Area,Value,Year,Element,origin) %>% filter(Element == 'seed')
test %>% dim()
#dispo_alim <-
animal %>% dim()
vegetal %>% dim()
test <- rbind(animal %>% mutate(origin = 'animal'),vegetal %>% mutate(origin = 'vegetal'))
test2 <- test %>% select(`Item Code`,Item,`Area Code`,Area,Value,Year,Element,origin) %>% filter(Element != 'seed')
test %>% dim()
#dispo_alim <-
animal %>% dim()
vegetal %>% dim()
test <- rbind(animal %>% mutate(origin = 'animal'),vegetal %>% mutate(origin = 'vegetal'))
test2 <- test %>% select(`Item Code`,Item,`Area Code`,Area,Value,Year,Element,origin)
test %>% dim()
#dispo_alim <-
View(test2)
test2 %>% select(Element) %>% distinct()
library(shiny)
library("ggplot2")
source('dataManipulation.R')
source('global.r')
library(dplyr)
library(readr)
library(odbc)
library(RMySQL)
library(RODBC)
test2 %>% select(Element) %>% distinct()
animal %>% dim()
vegetal %>% dim()
test <- rbind(animal %>% mutate(origin = 'animal'),vegetal %>% mutate(origin = 'vegetal'))
test2 <- test %>% select(`Item Code`,Item,`Area Code`,Area,Value,Year,Element,origin) %>% filter(Element %in% c(
'Food supply quantity (kg/capita/yr)','Food supply (kcal/capita/day)','Protein supply quantity (g/capita/day)',
'Fat supply quantity (g/capita/day)'
))
test %>% dim()
#dispo_alim <-
View(test2)
test2 %>% group_by(`Item Code`)
test2 %>% group_by(`Item Code`,origin)
test2 %>% group_by(`Item Code`,Item,`Area Code`,Area,Value,Year,origin)
group_by(`Item Code`,Item,`Area Code`,Area,Year,origin)
test2 %>% group_by(`Item Code`,Item,`Area Code`,Area,Year,origin)
library(tidyverse)
test2 %>% spread(key = Element,value = Value)
test2 %>% spread(key = Element,value = Value)
runApp('IA Scool/projets/FAO/FAO')
View(dispo_alim)
View(dispo_alim)
View(population)
View(population)
View(animal)
View(animal)
View(cereals)
cereals %>% mutate(is_cereal = ifelse(test = `Item Code` %in% c(2511,2805,2513,2514,2517,2520,2515,2516,2518),
yes = TRUE,
FALSE) )
cereals %>% mutate(is_cereal = ifelse(test = `Item Code` %in% c(2511,2805,2513,2514,2517,2520,2515,2516,2518),
yes = TRUE,
FALSE) )
test3 <- cereals %>% mutate(is_cereal = ifelse(test = `Item Code` %in% c(2511,2805,2513,2514,2517,2520,2515,2516,2518),
yes = TRUE,
FALSE) )
View(test3)
test3 <- cereals %>% mutate(is_cereal = ifelse(test = `Item Code` %in% c(2511,2805,2513,2514,2517,2520,2515,2516,2518),
yes = TRUE,
no = FALSE) )
test3 <- cereals %>% mutate(is_cereal = ifelse(test = `Item Code` %in% c(2511,2805,2513,2514,2517,2520,2515,2516,2518),
yes = TRUE) )
test3 <- cereals %>% mutate(is_cereal = ifelse(test = `Item Code` %in% c(2511,2805,2513,2514,2517,2520,2515,2516,2518),
yes = TRUE) )
View(cereals)
View(vegetal)
runApp('IA Scool/projets/FAO/FAO')
runApp('IA Scool/projets/FAO/FAO')
View(cereals_list)
View(vegetal)
vegetal %>% select(Element) %>% distinct()
shiny::runApp('IA Scool/projets/FAO/FAO')
runApp()
runApp('IA Scool/projets/FAO/FAO')
View(dispo_alim)
View(dispo_alim)
View(population)
disp_alim_per_item <- dispo_alim %>% inner_join(population,by=c("year","Area Code"))
disp_alim_per_item <- dispo_alim %>% inner_join(population,by=c("Year","Area Code"))
View(disp_alim_per_item)
disp_alim_per_item <- dispo_alim %>% inner_join(population %>% select(Year,Area Code,Value) ,by=c("Year","Area Code"))%>%select()
e protéines
disp_alim_per_item <- dispo_alim %>% inner_join(population %>% select('Year','Area Code','Value') ,by=c("Year","Area Code"))%>%select()
View(disp_alim_per_item)
e protéines
disp_alim_per_item <- dispo_alim %>% inner_join(population %>% select(c("Year","Area Code","Value")) ,by=c("Year","Area Code"))%>%select()
disp_alim_per_item <- dispo_alim %>% inner_join(population %>% select(c("Year","Area Code","Value")) ,by=c("Year","Area Code"))
View(disp_alim_per_item)
shiny::runApp('IA Scool/projets/FAO/FAO')
runApp('IA Scool/projets/FAO/FAO')
View(disp_alim_per_item)
View(disp_alim_per_item)
shiny::runApp('IA Scool/projets/FAO/FAO')
View(dataBaseConnect)
runApp('IA Scool/projets/FAO/FAO')
